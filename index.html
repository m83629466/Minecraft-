<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Speedfire1237 Server</title>
  <style>
    body { font-family: Arial; background: linear-gradient(135deg,#2c3e50,#4ca1af); color:white; display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh; text-align:center;}
    button { background:#27ae60;color:white;border:none;padding:15px 25px;font-size:18px;border-radius:10px;cursor:pointer;margin:10px;transition:0.3s;}
    button:hover{background:#2ecc71;}
    .info{background:rgba(255,255,255,0.1);padding:10px 15px;border-radius:8px;font-size:15px;margin-top:20px;}
  </style>
</head>
<body>
  <h1>ðŸŽ® Speedfire1237 Server</h1>
  <p>Gerencie e entre no servidor:</p>
  <button id="startServer">ðŸš€ Ligar Servidor</button>
  <button id="openMinecraft">ðŸŽ® Abrir no Minecraft</button>
  <button id="openCraftsman">ðŸ§± Abrir Craftsman</button>
  <div class="info">
    <p><strong>IP:</strong> Speedfire1237-JVnv.aternos.me</p>
    <p><strong>Porta:</strong> 63287</p>
    <p><strong>Status:</strong> <span id="status">Carregando...</span></p>
  </div>
  <script>
    const MC_IP = "Speedfire1237-JVnv.aternos.me";
    const MC_PORT = 63287;

    async function checkStatus() {
      try {
        const res = await fetch(`https://api.mcsrvstat.us/2/${MC_IP}`);
        const data = await res.json();
        document.getElementById("status").innerText = data.online ? "Online âœ…" : "Offline âŒ";
      } catch { 
        document.getElementById("status").innerText = "Erro ao verificar status"; 
      }
    }

    document.getElementById("startServer").addEventListener("click", async () => {
      try {
        const res = await fetch("/start-server", { method: "POST" });
        const data = await res.json();
        alert(data.message);
        setTimeout(checkStatus, 5000);
      } catch { alert("Erro ao conectar com o servidor."); }
    });

    document.getElementById("openMinecraft").addEventListener("click", () => {
      window.location.href = `minecraft://?addExternalServer=${MC_IP}|${MC_IP}:${MC_PORT}`;
    });

    document.getElementById("openCraftsman").addEventListener("click", () => {
      window.location.href = "https://play.google.com/store/apps/details?id=com.craftsman.go";
    });

    checkStatus();
    setInterval(checkStatus, 15000);
  </script>
</body>
</html>
