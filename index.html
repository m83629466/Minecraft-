<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Servidor Minecraft</title>
<link rel="icon" href="https://static.wikia.nocookie.net/minecraft_gamepedia/images/c/c7/Grass_Block.png" type="image/png">
<style>
  body { 
    font-family: Arial; 
    background: linear-gradient(135deg,#2c3e50,#4ca1af); 
    color:white; 
    display:flex; 
    flex-direction:column; 
    align-items:center; 
    justify-content:center; 
    height:100vh; 
    text-align:center;
  }
  button { 
    background:#27ae60;
    color:white;
    border:none;
    padding:15px 25px;
    font-size:18px;
    border-radius:10px;
    cursor:pointer;
    margin:10px;
    transition:0.3s;
  }
  button:hover{background:#2ecc71;}
  .info{
    background:rgba(255,255,255,0.1);
    padding:10px 15px;
    border-radius:8px;
    font-size:15px;
    margin-top:20px;
  }
</style>
</head>
<body>

<h1>🎮 Servidor Minecraft</h1>
<p>Gerencie e entre no servidor:</p>

<button id="startServer">🚀 Ligar Servidor</button>
<button id="openMinecraft">🎮 Adicionar no Minecraft</button>
<button id="openCraftsman">🧱 baixar minecraft</button>

<div class="info">
  <p><strong>IP:</strong> emerald.magmanode.com</p>
  <p><strong>Porta:</strong> 27760</p>
  <p><strong>Status:</strong> <span id="status">Carregando...</span></p>
</div>

<script>
const NODE_API = "https://minecraft-gwwh.onrender.com/start-server"; // Node.js remoto Render
const MC_IP = "emerald.magmanode.com";
const MC_PORT = 27760;

// Verifica status do servidor
async function checkStatus() {
  try {
    const res = await fetch(`https://api.mcsrvstat.us/2/${MC_IP}`);
    const data = await res.json();
    document.getElementById("status").innerText = data.online ? "Online ✅" : "Offline ❌";
  } catch {
    document.getElementById("status").innerText = "Erro ao verificar status";
  }
}

// Botão para ligar servidor
document.getElementById("startServer").addEventListener("click", async () => {
  try {
    const res = await fetch(NODE_API, { method: "POST" });
    const data = await res.json();
    alert(data.message);
    setTimeout(checkStatus, 5000);
  } catch {
    alert("Erro ao conectar com o servidor.");
  }
});

// Botão para abrir Minecraft
document.getElementById("openMinecraft").addEventListener("click", () => {
  window.location.href = `minecraft://?addExternalServer=${MC_IP}|${MC_IP}:${MC_PORT}`;
});

// Botão para abrir Craftsman na Play Store
document.getElementById("openCraftsman").addEventListener("click", () => {
  window.location.href = "https://play.google.com/store/apps/details?id=com.mmircil.cnb2&hl=en-US&pli=1";
});

// Atualiza status automaticamente
checkStatus();
setInterval(checkStatus, 15000);
</script>

</body>
</html>
